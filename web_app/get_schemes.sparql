PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX loan: <http://www.semanticweb.org/ontology/loan_approval#>
SELECT ?loanType ?label ?parent
WHERE {
  ?loanType rdfs:subClassOf* loan:Loan .
  FILTER(?loanType != loan:Loan)
  OPTIONAL { ?loanType rdfs:label ?label }
  OPTIONAL {
    ?loanType rdfs:subClassOf ?parent .
    ?parent rdfs:subClassOf* loan:Loan .
    FILTER(?parent != loan:Loan && ?parent != ?loanType)
  }
}
